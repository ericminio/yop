<!DOCTYPE html>
<html lang="en">
    <head>
        <title>prime factors</title>
        <script type="application/javascript" src="./page.js"></script>
        <script type="application/javascript" src="./prime-factors.js"></script>
        <script>
            const addEventListeners = (document) => {
                element('#go', document).addEventListener('click', computeLater);
                element('#number', document).addEventListener('input', clearResultPlaceholder);
            };
            const computeLater = (e) => {
                setTimeout(() => compute(e.target.ownerDocument), 50);
            };
            const clearResultPlaceholder = (e) => {
                displayResult('', e.target.ownerDocument);
            };

            const displayResult = (value, document) => {
                element('#decomposition', document).textContent = value;
            };
            const compute = (document) => {
                const number = parseInt(element('#number', document).value);
                const decomposition = primeFactorsOf(number);
                displayResult(userFriendlyResultString(number, decomposition), document);
            }
            const userFriendlyResultString = (number, decomposition) => {
                return `${number} = ${decomposition.join(' x ')}`;
            };
        </script>
    </head>

    <body>
        <label for="number">Number to decompose</label>
        <input id="number" value="42" />
        <button id="go">compute</button>
        <section>
            <h2>Result</h2>
            <label id="decomposition">42 = 2 x 3 x 7</label>
        </section>

        <script>
            addEventListeners(document);
            element('#number', document).focus();
        </script>
    </body>
</html>
