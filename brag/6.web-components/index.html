<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Welcome to Web components</title>

        <script>
            customElements.define(
                'yop-todo',
                class extends HTMLElement {
                    constructor() {
                        super();
                    }

                    async connectedCallback() {
                        const todo = await fetch('/template.html')
                            .then((response) => response.text())
                            .then((html) =>
                                html.replace(
                                    'todo-text',
                                    this.getAttribute('data-task')
                                )
                            );
                        this.innerHTML = todo;
                    }
                }
            );
        </script>
    </head>

    <body>
        <section>
            <h1>Todos</h1>
            <yop-todo data-task="Enjoy"></yop-todo>
            <yop-todo data-task="Repeat"></yop-todo>
        </section>
    </body>
</html>
